(wx.webpackJsonp=wx.webpackJsonp||[]).push([[13],{"111":function(t,e,o){"use strict";o.r(e);o(112);var a,n=o(28);for(a in n)"default"!==a&&function(t){o.d(e,t,function(){return n[t]})}(a)},"112":function(t,e,o){"use strict";o(55)},"113":function(t,e,o){},"12":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{"value":!0});var f=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function sliceIterator(t,e){var o=[],a=!0,n=!1,r=void 0;try{for(var i,u=t[Symbol.iterator]();!(a=(i=u.next()).done)&&(o.push(i.value),!e||o.length!==e);a=!0);}catch(t){n=!0,r=t}finally{try{!a&&u.return&&u.return()}finally{if(n)throw r}}return o}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(t,e,o){return e&&defineProperties(t.prototype,e),o&&defineProperties(t,o),t};function defineProperties(t,e){for(var o=0;o<e.length;o++){var a=e[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function u(t,e,o){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,e);if(void 0!==a){if("value"in a)return a.value;a=a.get;return void 0!==a?a.call(o):void 0}if(t=Object.getPrototypeOf(t),null!==t)return u(t,e,o)}var n,r=o(6),h=o(0),i=_interopRequireDefault(h),s=o(4),p=_interopRequireDefault(o(3));function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}o(113);(function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{"constructor":{"value":t,"enumerable":!1,"writable":!0,"configurable":!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(detailPage,h.Component),a(detailPage,[{"key":"_constructor","value":function _constructor(t){u(detailPage.prototype.__proto__||Object.getPrototypeOf(detailPage.prototype),"_constructor",this).call(this,t),this.state={"num":1,"_id":""},this.$$refs=new i.default.RefsArray}},{"key":"componentDidMount","value":function componentDidMount(){var e=this;this.switchTag();var t=Math.floor(5*Math.random())+1;this.setState({"num":t});var o,a=this.$router.params.tag,n=this.$router.params._id;a&&n&&(o=this.props.dispatch)({"type":"poetryDetail/poetryApi","payload":{"action":"getPoetryDetail","data":{"tag":a,"_id":n}},"callback":function callback(t){t.poetryInfo.author&&o({"type":"author/searchAuthor","payload":{"data":{"author":t.poetryInfo.author,"isReg":!1}}}),o({"type":"poetryDetail/save","payload":{"tag":a,"poetryInfo":t.poetryInfo}}),e.setState({"_id":n}),e.switchTag()}})}},{"key":"componentWillUnmount","value":function componentWillUnmount(){(0,this.props.dispatch)({"type":"author/save","payload":{"hasAuthor":!1}})}},{"key":"onShareAppMessage","value":function onShareAppMessage(){var t=this.state._id;return{"title":"诗词鉴赏","path":"/pages/detailPage/detailPage?tag="+this.props.poetryDetail.tag+"&_id="+t+"&is_share=1"}}},{"key":"_createData","value":function _createData(t,e,o){this.__state=t||this.state||{},this.__props=e||this.props||{};var a=this.$prefix,n=(0,h.genCompid)(a+"$compid__12"),r=f(n,2),i=r[0],u=r[1],s=(0,h.genCompid)(a+"$compid__13"),p=f(s,2),l=p[0],c=p[1],t=(0,h.genCompid)(a+"$compid__14"),e=f(t,2),o=e[0],n=e[1],r=this.__props,s=r.poetryDetail,p=s.poetryInfo,a=s.tag,t=r.author.hasAuthor,e=this.__state.num,s=(0,h.internal_inline_style)({"backgroundImage":"url(https://cdn.jsdelivr.net/gh/haveyuan/poetry_img/bg/bg"+e+".webp)"}),r=p.notes&&0<p.notes.length?(0,h.internal_inline_style)({"fontWeight":"bold"}):null,e="youmengying"===a?(0,h.internal_inline_style)({"fontWeight":"bold"}):null;return"yuanqu"!==a&&"nantang"!==a&&"huajianji"!==a||h.propsManager.set({"content":p.paragraphs},u,i),"shijing"===a&&h.propsManager.set({"content":p.content},c,l),"youmengying"===a&&h.propsManager.set({"content":p.content},n,o),Object.assign(this.__state,{"anonymousState__temp":s,"anonymousState__temp2":r,"anonymousState__temp3":e,"poetryInfo":p,"$compid__12":u,"$compid__13":c,"$compid__14":n,"tag":a,"hasAuthor":t}),this.__state}}]),a=n=detailPage,n.$$events=["toAuthorInfo"],n.$$componentPath="pages/detailPage/detailPage";function detailPage(){var t,a;!function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,detailPage);for(var e=arguments.length,o=Array(e),n=0;n<e;n++)o[n]=arguments[n];return(t=a=_possibleConstructorReturn(this,(t=detailPage.__proto__||Object.getPrototypeOf(detailPage)).call.apply(t,[this].concat(o)))).$usedState=["anonymousState__temp","anonymousState__temp2","anonymousState__temp3","poetryInfo","$compid__12","$compid__13","$compid__14","tag","hasAuthor","num","_id","dispatch","poetryDetail","author"],a.switchTag=function(){var t=a.props.poetryDetail,e=t.poetryInfo;switch(t.tag){case"yuanqu":a.setTitle(e.title);break;case"lunyu":a.setTitle(e.chapter);break;case"shijing":var o=e.chapter+"·"+e.section+"-"+e.title;a.setTitle(o);break;case"youmengying":a.setTitle("幽梦影");break;case"sishuwujing":a.setTitle(e.chapter);break;default:a.setTitle("诗词详情")}},a.setTitle=function(t){i.default.setNavigationBarTitle({"title":t})},a.toAuthorInfo=function(){var t=a.props.author,e=t.hasAuthor,t=t.authorInfo;e&&((0,p.default)("detail_page",{"action":"点击查看作者详情","author_name":t.name}),i.default.navigateTo({"url":"/pages/author/authorInfo/authorInfo"}))},a.config={"navigationBarBackgroundColor":"#fff"},a.customComponents=["Play"],_possibleConstructorReturn(a,t)}a=(0,r.__decorate)([(0,s.connect)(function(t){return{"poetryDetail":t.poetryDetail,"author":t.author}})],a),e.default=a,Component(o(0).default.createComponent(a,!0))},"28":function(t,e,o){"use strict";o.r(e);var a,n=o(12),r=o.n(n);for(a in n)"default"!==a&&function(t){o.d(e,t,function(){return n[t]})}(a);e.default=r.a},"55":function(t,e,o){t.exports=o.p+"pages/detailPage/detailPage.wxml"}},[[111,0,1,2]]]);