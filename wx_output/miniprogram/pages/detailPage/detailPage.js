(wx.webpackJsonp=wx.webpackJsonp||[]).push([[12],{"108":function(t,e,a){"use strict";a.r(e);a(109);var o,n=a(26);for(o in n)"default"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o)},"109":function(t,e,a){"use strict";a(53)},"110":function(t,e,a){},"12":function(e,a,o){"use strict";Object.defineProperty(a,"__esModule",{"value":!0});var n=function(t,e,a){return e&&defineProperties(t.prototype,e),a&&defineProperties(t,a),t};function defineProperties(t,e){for(var a=0;a<e.length;a++){var o=e[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function t(e,a,o){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,a);if(void 0!==n){if("value"in n)return n.value;n=n.get;return void 0!==n?n.call(o):void 0}if(e=Object.getPrototypeOf(e),null!==e)return t(e,a,o)}var r,i=o(6),u=o(0),s=_interopRequireDefault(u),l=o(3),p=_interopRequireDefault(o(5));function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}o(110);(function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{"constructor":{"value":t,"enumerable":!1,"writable":!0,"configurable":!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(detailPage,u.Component),n(detailPage,[{"key":"_constructor","value":function _constructor(e){t(detailPage.prototype.__proto__||Object.getPrototypeOf(detailPage.prototype),"_constructor",this).call(this,e),this.state={"num":1,"_id":""},this.$$refs=new s.default.RefsArray}},{"key":"componentDidMount","value":function componentDidMount(){var e=this;this.switchTag();var t=Math.floor(5*Math.random())+1;this.setState({"num":t});var a,o=this.$router.params.tag,n=this.$router.params._id;o&&n&&(a=this.props.dispatch)({"type":"poetryDetail/poetryApi","payload":{"action":"getPoetryDetail","data":{"tag":o,"_id":n}},"callback":function callback(t){t.poetryInfo.author&&a({"type":"author/searchAuthor","payload":{"data":{"author":t.poetryInfo.author,"isReg":!1}}}),a({"type":"poetryDetail/save","payload":{"tag":o,"poetryInfo":t.poetryInfo}}),e.setState({"_id":n}),e.switchTag()}})}},{"key":"componentWillUnmount","value":function componentWillUnmount(){(0,this.props.dispatch)({"type":"author/save","payload":{"hasAuthor":!1}})}},{"key":"onShareAppMessage","value":function onShareAppMessage(){var t=this.state._id;return{"title":"诗词鉴赏","path":"/pages/detailPage/detailPage?tag="+this.props.poetryDetail.tag+"&_id="+t+"&is_share=1"}}},{"key":"_createData","value":function _createData(t,e,a){this.__state=t||this.state||{},this.__props=e||this.props||{};this.$prefix;var o=this.__props,n=o.poetryDetail,r=n.poetryInfo,t=n.tag,e=o.author.hasAuthor,a=this.__state.num,n=(0,u.internal_inline_style)({"backgroundImage":"url(https://cdn.jsdelivr.net/gh/haveyuan/poetry_img/bg/bg"+a+".webp)"}),o=r.notes&&0<r.notes.length?(0,u.internal_inline_style)({"fontWeight":"bold"}):null,a="youmengying"===t?(0,u.internal_inline_style)({"fontWeight":"bold"}):null;return Object.assign(this.__state,{"anonymousState__temp":n,"anonymousState__temp2":o,"anonymousState__temp3":a,"poetryInfo":r,"tag":t,"hasAuthor":e}),this.__state}}]),n=r=detailPage,r.$$events=["toAuthorInfo"],r.$$componentPath="pages/detailPage/detailPage";function detailPage(){var t,o;!function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,detailPage);for(var e=arguments.length,a=Array(e),n=0;n<e;n++)a[n]=arguments[n];return(t=o=_possibleConstructorReturn(this,(t=detailPage.__proto__||Object.getPrototypeOf(detailPage)).call.apply(t,[this].concat(a)))).$usedState=["anonymousState__temp","anonymousState__temp2","anonymousState__temp3","poetryInfo","tag","hasAuthor","num","_id","dispatch","poetryDetail","author"],o.switchTag=function(){var t=o.props.poetryDetail,e=t.poetryInfo;switch(t.tag){case"yuanqu":o.setTitle(e.title);break;case"lunyu":o.setTitle(e.chapter);break;case"shijing":var a=e.chapter+"·"+e.section+"-"+e.title;o.setTitle(a);break;case"youmengying":o.setTitle("幽梦影");break;case"sishuwujing":o.setTitle(e.chapter);break;default:o.setTitle("诗词详情")}},o.setTitle=function(t){s.default.setNavigationBarTitle({"title":t})},o.toAuthorInfo=function(){var t=o.props.author,e=t.hasAuthor,t=t.authorInfo;e&&((0,p.default)("detail_page",{"action":"点击查看作者详情","author_name":t.name}),s.default.navigateTo({"url":"/pages/author/authorInfo/authorInfo"}))},o.config={"navigationBarBackgroundColor":"#fff"},o.customComponents=[],_possibleConstructorReturn(o,t)}n=(0,i.__decorate)([(0,l.connect)(function(t){return{"poetryDetail":t.poetryDetail,"author":t.author}})],n),a.default=n,Component(o(0).default.createComponent(n,!0))},"26":function(t,e,a){"use strict";a.r(e);var o,n=a(12),r=a.n(n);for(o in n)"default"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o);e.default=r.a},"53":function(t,e,a){t.exports=a.p+"pages/detailPage/detailPage.wxml"}},[[108,0,1,2]]]);