(wx.webpackJsonp=wx.webpackJsonp||[]).push([[12],{"21":function(e,t,n){"use strict";n.r(t);var o,r=n(9),a=n.n(r);for(o in r)"default"!==o&&function(e){n.d(t,e,function(){return r[e]})}(o);t.default=a.a},"44":function(e,t,n){e.exports=n.p+"pages/index/index.wxml"},"9":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{"value":!0});var r=function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e};function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function o(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0!==r){if("value"in r)return r.value;r=r.get;return void 0!==r?r.call(n):void 0}if(e=Object.getPrototypeOf(e),null!==e)return o(e,t,n)}var a,i=n(0),u=_interopRequireDefault(i),s=n(22),l=_interopRequireDefault(n(23));function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n(95);(function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(Index,i.Component),r(Index,[{"key":"_constructor","value":function _constructor(e){o(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"_constructor",this).call(this,e),this.state={"barHeight":0,"catalog":[],"bgUrl":"","imgUrl":""},this.$$refs=new u.default.RefsArray}},{"key":"componentDidMount","value":function componentDidMount(){var t=this,e=u.default.getMenuButtonBoundingClientRect();u.default.getSystemInfo({"success":function success(){t.setState({"barHeight":e.top})}}),u.default.cloud.downloadFile({"fileID":"cloud://test-hhh.7465-test-hhh-1304398770/poetry/images/bg.jpg","success":function success(e){-1<e.errMsg.indexOf("downloadFile:ok")&&t.setState({"bgUrl":e.tempFilePath})}}),this.getallTags()}},{"key":"onShareAppMessage","value":function onShareAppMessage(){return{"title":"这里有最全的诗词种类，快来看看吧！","imageUrl":"../../images/share.jpg","path":"/pages/index/index"}}},{"key":"_createData","value":function _createData(e,t,n){var o=this;this.__state=e||this.state||{},this.__props=t||this.props||{};this.$prefix;var r=this.__state,e=r.bgUrl,t=r.barHeight,n=r.catalog,e=(r.imgUrl,(0,i.internal_inline_style)({"backgroundImage":"url("+e+")"})),t=(0,i.internal_inline_style)({"top":t+"px"}),n=n.map(function(e,t){e={"$original":(0,i.internal_get_original)(e)};t="dzzzz"+t;return o.anonymousFunc0Map[t]=function(){return o.toListPage(e.$original.tag,e.$original.name)},{"_$indexKey":t,"$loopState__temp4":(0,i.internal_inline_style)({"whiteSpace":"pre-line"}),"$original":e.$original}});return Object.assign(this.__state,{"anonymousState__temp":e,"anonymousState__temp2":t,"loopArray9":n}),this.__state}},{"key":"anonymousFunc0","value":function anonymousFunc0(e){for(var t,n=arguments.length,o=Array(1<n?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return this.anonymousFunc0Map[e]&&(t=this.anonymousFunc0Map)[e].apply(t,o)}}]),r=a=Index,a.$$events=["anonymousFunc0"],a.$$componentPath="pages/index/index";function Index(){var e,n;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Index);for(var t=arguments.length,o=Array(t),r=0;r<t;r++)o[r]=arguments[r];return(e=n=_possibleConstructorReturn(this,(e=Index.__proto__||Object.getPrototypeOf(Index)).call.apply(e,[this].concat(o)))).$usedState=["anonymousState__temp","anonymousState__temp2","loopArray9","catalog","barHeight","bgUrl","imgUrl"],n.config={"navigationStyle":"custom"},n.getallTags=function(){(0,s.requestCloud)({"clounFnName":"poetry","controller":"poetry","action":"allCategories"}).then(function(e){0===e.code?n.setState({"catalog":e.data}):(0,l.default)({"title":e.errMsg})}).catch(function(e){(0,l.default)({"title":"网络异常"})})},n.toListPage=function(e,t){u.default.navigateTo({"url":"/pages/poetryList/poetryList?tag="+e+"&name="+t})},n.getCode=function(){(0,s.requestCloud)({"clounFnName":"poetry","controller":"poetry","action":"getCode","data":{"scene":encodeURIComponent("from=code"),"page":"pages/index/index"}}).then(function(e){var t;0===e.code?(console.log(e),t=new Uint8Array(e.buffer.data),t="data:image/png;base64,"+u.default.arrayBufferToBase64(t),console.log(t),n.setState({"imgUrl":t})):(0,l.default)({"title":e.errMsg})}).catch(function(e){(0,l.default)({"title":"网络异常"})})},n.anonymousFunc0Map={},n.customComponents=["Tools"],_possibleConstructorReturn(n,e)}t.default=r,Component(n(0).default.createComponent(r,!0))},"93":function(e,t,n){"use strict";n.r(t);n(94);var o,r=n(21);for(o in r)"default"!==o&&function(e){n.d(t,e,function(){return r[e]})}(o)},"94":function(e,t,n){"use strict";n(44)},"95":function(e,t,n){}},[[93,0,1,2]]]);