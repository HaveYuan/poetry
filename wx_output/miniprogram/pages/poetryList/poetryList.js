(wx.webpackJsonp=wx.webpackJsonp||[]).push([[15],{"10":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{"value":!0});var p=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function sliceIterator(t,e){var o=[],r=!0,a=!1,n=void 0;try{for(var i,s=t[Symbol.iterator]();!(r=(i=s.next()).done)&&(o.push(i.value),!e||o.length!==e);r=!0);}catch(t){a=!0,n=t}finally{try{!r&&s.return&&s.return()}finally{if(a)throw n}}return o}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(t,e,o){return e&&defineProperties(t.prototype,e),o&&defineProperties(t,o),t};function defineProperties(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0!==r){if("value"in r)return r.value;r=r.get;return void 0!==r?r.call(o):void 0}if(t=Object.getPrototypeOf(t),null!==t)return f(t,e,o)}var a,n=o(5),u=o(0),i=function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}(u),s=o(3);function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}o(106);(function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{"constructor":{"value":t,"enumerable":!1,"writable":!0,"configurable":!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(poetryList,u.Component),r(poetryList,[{"key":"_constructor","value":function _constructor(t){f(poetryList.prototype.__proto__||Object.getPrototypeOf(poetryList.prototype),"_constructor",this).call(this,t),this.state={"loading":!0,"tag":"","pageNo":1,"poetryListData":[]},this.$$refs=new i.default.RefsArray}},{"key":"componentDidMount","value":function componentDidMount(){var t=this;i.default.setNavigationBarTitle({"title":this.$router.params.name});var e=this.$router.params.tag;this.setState({"tag":e},function(){t.getpoetryList(1)})}},{"key":"onReachBottom","value":function onReachBottom(){var t=this.state,e=t.loading,t=t.pageNo;e&&this.getpoetryList(t)}},{"key":"_createData","value":function _createData(t,e,o){var r=this;this.__state=t||this.state||{},this.__props=e||this.props||{};var a=this.$prefix,n=(0,u.genCompid)(a+"$compid__6"),i=p(n,2),t=i[0],e=i[1],o=this.__state,n=o.loading,i=o.poetryListData,s=o.tag,i=i.map(function(t,e){t={"$original":(0,u.internal_get_original)(t)};function Da(){return r.toDetail(t.$original)}var o=(0,u.genCompid)(a+"ezzzzzzzzz"+e,!0),e=p(o,2),o=e[0],e=e[1];return u.propsManager.set({"tag":s,"poetryObj":t.$original,"clickFn":Da},e,o),{"$loopState__temp2":Da,"$compid__5":e,"$original":t.$original}});return u.propsManager.set({"loading":n},e,t),Object.assign(this.__state,{"loopArray16":i,"$compid__6":e}),this.__state}}]),r=a=poetryList,a.$$events=[],a.$$componentPath="pages/poetryList/poetryList";function poetryList(){var t,a;!function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,poetryList);for(var e=arguments.length,o=Array(e),r=0;r<e;r++)o[r]=arguments[r];return(t=a=_possibleConstructorReturn(this,(t=poetryList.__proto__||Object.getPrototypeOf(poetryList)).call.apply(t,[this].concat(o)))).$usedState=["loopArray16","$compid__6","poetryListData","loading","tag","pageNo","dispatch","author"],a.config={"navigationBarBackgroundColor":"#D9C1A5"},a.getpoetryList=function(r){(0,a.props.dispatch)({"type":"poetryDetail/poetryApi","payload":{"action":"getPoetryList","data":{"pageNo":r,"pageSize":20,"tag":a.state.tag}},"callback":function callback(t){var e,o=a.state.poetryListData;t.data&&(e=r+1,a.setState({"poetryListData":o.concat(t.data),"pageNo":e}),r===t.totalPage&&a.setState({"loading":!1}))}})},a.toDetail=function(t){var e=a.state.tag,o=a.props,r=o.dispatch,o=o.author.authorInfo;t.author&&t.author===o.name&&r({"type":"author/save","payload":{"hasAuthor":!0}}),t.author&&t.author!==o.name&&r({"type":"author/authorApi","payload":{"action":"searchAuthor","data":{"author":t.author,"isReg":!1}},"callback":function callback(t){0<t.data.length&&r({"type":"author/save","payload":{"authorInfo":t.data[0],"hasAuthor":!0}})}}),r({"type":"poetryDetail/save","payload":{"tag":e,"poetryInfo":t}}),i.default.navigateTo({"url":"/pages/detailPage/detailPage"})},a.customComponents=["ListItem","Loading"],_possibleConstructorReturn(a,t)}r=(0,n.__decorate)([(0,s.connect)(function(t){return{"poetryDetail":t.poetryDetail,"author":t.author}})],r),e.default=r,Component(o(0).default.createComponent(r,!0))},"104":function(t,e,o){"use strict";o.r(e);o(105);var r,a=o(24);for(r in a)"default"!==r&&function(t){o.d(e,t,function(){return a[t]})}(r)},"105":function(t,e,o){"use strict";o(51)},"106":function(t,e,o){},"24":function(t,e,o){"use strict";o.r(e);var r,a=o(10),n=o.n(a);for(r in a)"default"!==r&&function(t){o.d(e,t,function(){return a[t]})}(r);e.default=n.a},"51":function(t,e,o){t.exports=o.p+"pages/poetryList/poetryList.wxml"}},[[104,0,1]]]);