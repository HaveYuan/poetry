(wx.webpackJsonp=wx.webpackJsonp||[]).push([[16],{"108":function(t,e,o){"use strict";o.r(e);o(109);var a,r=o(27);for(a in r)"default"!==a&&function(t){o.d(e,t,function(){return r[t]})}(a)},"109":function(t,e,o){"use strict";o(54)},"11":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{"value":!0});var l=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function sliceIterator(t,e){var o=[],a=!0,r=!1,n=void 0;try{for(var i,p=t[Symbol.iterator]();!(a=(i=p.next()).done)&&(o.push(i.value),!e||o.length!==e);a=!0);}catch(t){r=!0,n=t}finally{try{!a&&p.return&&p.return()}finally{if(r)throw n}}return o}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(t,e,o){return e&&defineProperties(t.prototype,e),o&&defineProperties(t,o),t};function defineProperties(t,e){for(var o=0;o<e.length;o++){var a=e[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function r(t,e,o){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,e);if(void 0!==a){if("value"in a)return a.value;a=a.get;return void 0!==a?a.call(o):void 0}if(t=Object.getPrototypeOf(t),null!==t)return r(t,e,o)}var n,i=o(6),c=o(0),p=_interopRequireDefault(c),s=o(4),u=_interopRequireDefault(o(3));function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}o(110);(function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{"constructor":{"value":t,"enumerable":!1,"writable":!0,"configurable":!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(poetryList,c.Component),a(poetryList,[{"key":"_constructor","value":function _constructor(t){r(poetryList.prototype.__proto__||Object.getPrototypeOf(poetryList.prototype),"_constructor",this).call(this,t),this.state={"loading":!0,"tag":"","pageNo":1,"poetryListData":[],"inputVal":""},this.$$refs=new p.default.RefsArray}},{"key":"componentDidMount","value":function componentDidMount(){var t=this;p.default.setNavigationBarTitle({"title":this.$router.params.name});var e=this.$router.params.tag;this.setState({"tag":e},function(){t.getpoetryList(1)})}},{"key":"onReachBottom","value":function onReachBottom(){var t=this.state,e=t.loading,t=t.pageNo;e&&this.getpoetryList(t)}},{"key":"_createData","value":function _createData(t,e,o){var a=this;this.__state=t||this.state||{},this.__props=e||this.props||{};var r=this.$prefix,n=(0,c.genCompid)(r+"$compid__10"),i=l(n,2),p=i[0],s=i[1],t=(0,c.genCompid)(r+"$compid__11"),e=l(t,2),o=e[0],n=e[1],i=this.__state,t=i.loading,e=i.poetryListData,u=i.tag,i=e.map(function(t,e){t={"$original":(0,c.internal_get_original)(t)};function Xa(){return a.toDetail(t.$original)}var o=(0,c.genCompid)(r+"ezzzzzzzzz"+e,!0),e=l(o,2),o=e[0],e=e[1];return c.propsManager.set({"tag":u,"poetryObj":t.$original,"clickFn":Xa},e,o),{"$loopState__temp2":Xa,"$compid__9":e,"$original":t.$original}});return c.propsManager.set({"placeholder":"请输入关键字搜索","searchInput":this.searchInput},s,p),c.propsManager.set({"len":e.length,"loading":t},n,o),Object.assign(this.__state,{"loopArray10":i,"$compid__10":s,"$compid__11":n}),this.__state}}]),a=n=poetryList,n.$$events=[],n.$$componentPath="pages/poetryList/poetryList";function poetryList(){var t,r;!function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,poetryList);for(var e=arguments.length,o=Array(e),a=0;a<e;a++)o[a]=arguments[a];return(t=r=_possibleConstructorReturn(this,(t=poetryList.__proto__||Object.getPrototypeOf(poetryList)).call.apply(t,[this].concat(o)))).$usedState=["loopArray10","$compid__10","$compid__11","poetryListData","loading","tag","pageNo","inputVal","dispatch","author"],r.config={"navigationBarBackgroundColor":"#D9C1A5"},r.getpoetryList=function(a){var t=r.props.dispatch,e=r.state.inputVal;t({"type":"poetryDetail/poetryApi","payload":{"action":"getPoetryList","data":{"pageNo":a,"pageSize":20,"tag":r.state.tag,"value":e}},"callback":function callback(t){var e,o=r.state.poetryListData;t.data&&(1==a?(e=a+1,r.setState({"poetryListData":t.data,"pageNo":e})):(e=a+1,r.setState({"poetryListData":o.concat(t.data),"pageNo":e})),a===t.totalPage||0===t.totalPage?r.setState({"loading":!1}):r.setState({"loading":!0}))}})},r.toDetail=function(t){var e=r.state.tag,o=r.props,a=o.dispatch,o=o.author.authorInfo;t.author&&t.author===o.name&&a({"type":"author/save","payload":{"hasAuthor":!0}}),t.author&&t.author!==o.name&&a({"type":"author/searchAuthor","payload":{"data":{"author":t.author,"isReg":!1}}}),a({"type":"poetryDetail/save","payload":{"tag":e,"poetryInfo":t}}),p.default.navigateTo({"url":"/pages/detailPage/detailPage"}),(0,u.default)("poetry_list",{"action":"点击诗词详情","poetry":JSON.stringify(t)})},r.searchInput=function(t){r.setState({"inputVal":t.detail.value},function(){r.getpoetryList(1),""!==t.detail.value&&(0,u.default)("poetry_list",{"action":"搜索诗词内容","inputVal":JSON.stringify(t.detail.value)})})},r.customComponents=["Search","ListItem","Loading"],_possibleConstructorReturn(r,t)}a=(0,i.__decorate)([(0,s.connect)(function(t){return{"poetryDetail":t.poetryDetail,"author":t.author}})],a),e.default=a,Component(o(0).default.createComponent(a,!0))},"110":function(t,e,o){},"27":function(t,e,o){"use strict";o.r(e);var a,r=o(11),n=o.n(r);for(a in r)"default"!==a&&function(t){o.d(e,t,function(){return r[t]})}(a);e.default=n.a},"54":function(t,e,o){t.exports=o.p+"pages/poetryList/poetryList.wxml"}},[[108,0,1,2]]]);